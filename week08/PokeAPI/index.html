<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="shortcut con" href="favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PokeAPI</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="styles.css"/>
	</head>
    <body>
        <div class="container">
        <nav class="nav nav-tabs">
            <a href="../../index.html">Portfolio</a> |
            <a href="../index.html">Back</a>
        </nav>
        
        <h1>Pokemon</h1>
        <div id="pokemon">
            <h2>Pokemon List</h2>
            <ul id="pokemonList" class="list-group">
            </ul>
            <button id="startBtn" class="btn-default btn-lg" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon')">List Pokemon</button>
            
            <ul class="pagination">
                <li class="page-item"><a id="pokemonPreBtn" style="display:block" class="page-link" ontouchend="getPokemon('')" onclick="getPokemon('')">Previous</a></li>
                <li class="page-item"><a class="page-link" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=20&limit=20')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=20&limit=20')">1</a></li>
                <li class="page-item"><a class="page-link" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=40&limit=20')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=40&limit=20')">2</a></li>
                <li class="page-item"><a class="page-link" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=60&limit=20')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=60&limit=20')">3</a></li>
                <li class="page-item"><a class="page-link" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=80&limit=20')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=80&limit=20')">4</a></li>
                <li class="page-item"><a class="page-link" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=100&limit=20')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon?offset=100&limit=20')">5</a></li>
                <li class="page-item"><a id="pokemonNextBtn" class="page-link" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon')">Next</a></li>
              </ul>
            
              <!-- <button id="pokemonNextBtn" class="btn-default btn-lg" ontouchend="getPokemon('https://pokeapi.co/api/v2/pokemon')" onclick="getPokemon('https://pokeapi.co/api/v2/pokemon')">List Pokemon</button>
              <button id="pokemonPreBtn" class="btn-default btn-lg" ontouchend="getPokemon('')" onclick="getPokemon('')">Prev</button> -->
            
        </div>

        <!-- <div class="pagination">
            <a href="#">&laquo;</a>
            <a href="#">1</a>
            <a class="active" href="#">2</a>
            <a href="#">3</a>
            <a href="#">4</a>
            <a href="#">5</a>
            <a href="#">6</a>
            <a href="#">&raquo;</a>
          </div> -->

        <script src="pokeapi.js"></script>
        <!--script>

             const pBtn = document.querySelector('#pokemonPreBtn');
            const nBtn = document.querySelector('#pokemonNextBtn');
            async function getPokemon(url) {
                if (url != "" || null) {
                    try {
                        const response = await fetch(url);
                        if (!response.ok) {
                            throw Error(response.statusText)
                        } else {
                            const fetchJson = await response.json();
                            console.log(fetchJson)
                            renderPokemon(fetchJson)
                        }
                    } catch (error) {
                        console.log(error);
                    }
                }
                
            }

            function renderPokemon(data) {
                const pokemonContainer = document.querySelector('#pokemonList');
                console.log(pokemonContainer);
                //remove all child nodes
                while (pokemonContainer.hasChildNodes()) {
                    pokemonContainer.removeChild(pokemonContainer.firstChild);
                }

                if (data.next || data.previous) {
                    console.log(data.previous);
                    //nBtn.textContent = "Next";
                    pBtn.setAttribute("style", "float:right; display:block");
                    //pBtn.setAttribute("class", "btn");
                    if (data.previous == null) {
                        pBtn.setAttribute('ontouchend', `getPokemon('${""}')`);
                    } else {
                        pBtn.setAttribute('ontouchend', `getPokemon('${data.previous}')`);
                    }
                    

                    nBtn.textContent = "Next";
                    nBtn.setAttribute("style", "float:right");
                    nBtn.setAttribute('ontouchend', `getPokemon('${data.next}')`);
                }
                
                console.log(data.results);
                data.results.forEach( pokemon => {
                    const listItem = document.createElement('li');
                    listItem.setAttribute("class", "list-group-item");
                   // listItem.setAttribute("class", "list-group-item");
                    listItem.innerHTML =
                    `
                        <span>${pokemon.name}</span> <button class="btn btn-primary btn-sm" ontouchend="getDetails('${pokemon.name}', '${pokemon.url}')">View</button>
                    `
                    listItem.id = pokemon.name;
                    pokemonContainer.appendChild(listItem);
                })
            }
            
            function getDetails(id, url) {                                  //id=pokemon.name, url=details of pokemon
                fetch(url)
                    .then( res => res.json() )                              //response a string of array
                    .then( json => {                                        //response promise  (=> a fat arrow syntax)
                        console.log('DETAILS ', json);
                        var li = document.getElementById(id);
                        var div = document.createElement('div');            //create div for image
                        div.innerHTML = 
                        `
                            <img src="${json.sprites.front_default}" />
                            <div>
                            <p>Base Experience: ${json.base_experience}</p>
                            <p>Height: ${json.height}</p>
                            <p>Weight: ${json.weight}</p>
                            </div>

                        `
                        li.lastElementChild.remove();                       //remove button
                        li.appendChild(div);                                //append Child again
                    })
            } 

        </script-->
        </div>
    </body>
</html >
